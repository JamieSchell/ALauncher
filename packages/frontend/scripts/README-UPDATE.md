# üì¶ –°–∫—Ä–∏–ø—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ª–∞—É–Ω—á–µ—Ä–∞

## –û–±–∑–æ—Ä

–°–∫—Ä–∏–ø—Ç `update-launcher-full.js` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤–µ—Ä—Å–∏–∏ –ª–∞—É–Ω—á–µ—Ä–∞ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö, –≤–∫–ª—é—á–∞—è:
- URL –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è
- SHA-256 —Ö–µ—à —Ñ–∞–π–ª–∞ (–¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏)
- –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞
- –ó–∞–º–µ—Ç–∫–∏ –æ —Ä–µ–ª–∏–∑–µ
- –§–ª–∞–≥ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```bash
npm run update-launcher -- --url https://example.com/launcher-1.0.133-Setup.exe --auto-find
```

### –° –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –ø–æ–∏—Å–∫–æ–º —Ñ–∞–π–ª–∞

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞–π–¥–µ—Ç —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫ –≤ –ø–∞–ø–∫–µ `release/` –∏ –≤—ã—á–∏—Å–ª–∏—Ç —Ö–µ—à:

```bash
node scripts/update-launcher-full.js \
  --url https://example.com/launcher-1.0.133-Setup.exe \
  --auto-find
```

### –° —É–∫–∞–∑–∞–Ω–∏–µ–º —Ñ–∞–π–ª–∞

–ï—Å–ª–∏ —Ñ–∞–π–ª –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –¥—Ä—É–≥–æ–º –º–µ—Å—Ç–µ:

```bash
node scripts/update-launcher-full.js \
  --url https://example.com/launcher.exe \
  --file release/Modern\ Launcher-1.0.133-Setup.exe
```

### –° –∑–∞–º–µ—Ç–∫–∞–º–∏ –æ —Ä–µ–ª–∏–∑–µ

```bash
node scripts/update-launcher-full.js \
  --url https://example.com/launcher.exe \
  --auto-find \
  --release-notes "–ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –±–∞–≥–∏\n–î–æ–±–∞–≤–ª–µ–Ω–∞ –Ω–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è X"
```

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ

```bash
node scripts/update-launcher-full.js \
  --url https://example.com/launcher.exe \
  --auto-find \
  --required
```

### –° —É–∫–∞–∑–∞–Ω–∏–µ–º –≤–µ—Ä—Å–∏–∏

```bash
node scripts/update-launcher-full.js \
  --version 1.0.133 \
  --url https://example.com/launcher.exe \
  --auto-find
```

## –ü–∞—Ä–∞–º–µ—Ç—Ä—ã

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –û–ø–∏—Å–∞–Ω–∏–µ | –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π |
|----------|----------|--------------|
| `--url <url>` | URL –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫–∞ | ‚úÖ –î–∞ |
| `--version <version>` | –í–µ—Ä—Å–∏—è –ª–∞—É–Ω—á–µ—Ä–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏–∑ package.json) | ‚ùå –ù–µ—Ç |
| `--auto-find` | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞–π—Ç–∏ —Ñ–∞–π–ª –≤ release/ | ‚ùå –ù–µ—Ç |
| `--file <path>` | –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫–∞ | ‚ùå –ù–µ—Ç |
| `--release-notes <text>` | –ó–∞–º–µ—Ç–∫–∏ –æ —Ä–µ–ª–∏–∑–µ | ‚ùå –ù–µ—Ç |
| `--required` | –°–¥–µ–ª–∞—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º | ‚ùå –ù–µ—Ç |
| `--help, -h` | –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø—Ä–∞–≤–∫—É | ‚ùå –ù–µ—Ç |

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü–æ—Å–ª–µ —Å–±–æ—Ä–∫–∏ –ª–∞—É–Ω—á–µ—Ä–∞

1. –°–æ–±–µ—Ä–∏—Ç–µ –ª–∞—É–Ω—á–µ—Ä:
```bash
npm run build:installer
```

2. –ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª –Ω–∞ —Å–µ—Ä–≤–µ—Ä/CDN

3. –û–±–Ω–æ–≤–∏—Ç–µ –ë–î:
```bash
npm run update-launcher -- \
  --url https://your-server.com/launcher-1.0.133-Setup.exe \
  --auto-find \
  --release-notes "–ù–æ–≤–∞—è –≤–µ—Ä—Å–∏—è —Å —É–ª—É—á—à–µ–Ω–∏—è–º–∏"
```

### –ü–æ–ª–Ω—ã–π workflow

```bash
# 1. –°–±–æ—Ä–∫–∞
npm run build:installer

# 2. –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä (–ø—Ä–∏–º–µ—Ä)
scp release/Modern\ Launcher-1.0.133-Setup.exe user@server:/var/www/launcher/

# 3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ë–î
npm run update-launcher -- \
  --url https://launcher.example.com/Modern\ Launcher-1.0.133-Setup.exe \
  --auto-find \
  --release-notes "–í–µ—Ä—Å–∏—è 1.0.133:\n- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –±–∞–≥–∏\n- –£–ª—É—á—à–µ–Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å"
```

## –ß—Ç–æ –¥–µ–ª–∞–µ—Ç —Å–∫—Ä–∏–ø—Ç

1. **–ß–∏—Ç–∞–µ—Ç –≤–µ—Ä—Å–∏—é** –∏–∑ `package.json` (–µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω–∞)
2. **–ù–∞—Ö–æ–¥–∏—Ç —Ñ–∞–π–ª —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫–∞** –≤ `release/` (–µ—Å–ª–∏ `--auto-find`)
3. **–í—ã—á–∏—Å–ª—è–µ—Ç SHA-256 —Ö–µ—à** —Ñ–∞–π–ª–∞
4. **–û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ä–∞–∑–º–µ—Ä** —Ñ–∞–π–ª–∞
5. **–ü–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ –ë–î** (–∏–∑ `packages/backend/.env`)
6. **–û–±–Ω–æ–≤–ª—è–µ—Ç –∏–ª–∏ —Å–æ–∑–¥–∞–µ—Ç** –∑–∞–ø–∏—Å—å –≤ —Ç–∞–±–ª–∏—Ü–µ `launcher_versions`

## –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã —Ñ–∞–π–ª–æ–≤

- Windows: `.exe` (NSIS installer, portable)
- macOS: `.dmg`, `.zip`
- Linux: `.AppImage`, `.deb`

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Node.js —Å –º–æ–¥—É–ª—è–º–∏: `mysql2`, `uuid`, `crypto` (–≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π)
- –î–æ—Å—Ç—É–ø –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö MySQL
- –§–∞–π–ª `.env` –≤ `packages/backend/` —Å `DATABASE_URL`

## –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

–°–∫—Ä–∏–ø—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –æ—à–∏–±–∫–∏:
- –§–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω ‚Üí –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ, –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ –±–µ–∑ —Ö–µ—à–∞
- –û—à–∏–±–∫–∞ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è —Ö–µ—à–∞ ‚Üí –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ, –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ –±–µ–∑ —Ö–µ—à–∞
- –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î ‚Üí –æ—à–∏–±–∫–∞, –≤—ã—Ö–æ–¥ —Å –∫–æ–¥–æ–º 1
- –í–µ—Ä—Å–∏—è —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç ‚Üí –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –∑–∞–ø–∏—Å–∏

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ CI/CD

–ü—Ä–∏–º–µ—Ä –¥–ª—è GitHub Actions:

```yaml
- name: Update launcher version in DB
  run: |
    npm run update-launcher -- \
      --url ${{ secrets.LAUNCHER_CDN_URL }}/launcher-${{ github.ref_name }}-Setup.exe \
      --auto-find \
      --release-notes "${{ github.event.head_commit.message }}"
  env:
    DATABASE_URL: ${{ secrets.DATABASE_URL }}
```

## –°–ø—Ä–∞–≤–∫–∞

```bash
node scripts/update-launcher-full.js --help
```

---

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: –°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—Ö–æ–¥–∏—Ç —Ñ–∞–π–ª—ã –ø–æ –ø–∞—Ç—Ç–µ—Ä–Ω–∞–º:
- `Modern Launcher-{version}-Setup.exe`
- `Modern Launcher-{version}-portable.exe`
- `Modern Launcher-{version}.dmg`
- `Modern Launcher-{version}.AppImage`
- –ò –¥—Ä—É–≥–∏–µ —Ñ–æ—Ä–º–∞—Ç—ã —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫–æ–≤

