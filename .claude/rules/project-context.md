# Правила понимания контекста проекта ALauncher

## Обязательное чтение при старте сессии

ПЕРЕД ЛЮБЫМИ ДЕЙСТВИЯМИ всегда:

1. **Прочитай `.claude/CLAUDE.md`** - основная информация о проекте
2. **Проверь `.claude/context/current-state.md`** - текущее состояние работы
3. **Изучай структуру** перед изменением файлов

## Принципы работы

### 1. Понимание контекста
- Мы работаем над **ALauncher** - Minecraft Launcher на Tauri + React + Express
- Репозиторий: **JamieSchell/ALauncher**
- Язык общения с пользователем: **Русский**
- Основной домен: **api.alauncher.su** (HTTPS only)

### 2. Структура проекта
```
packages/
├── backend/    → Express на порту 7240
├── frontend/   → Tauri desktop app
└── shared/     → Общие утилиты (TypeScript, v2.0.0)
```

### 3. Перед изменением файлов
- **ВСЕГДА** читай файл первым (Read tool)
- Проверяй зависимости перед изменением
- Используй Edit, а не Write для существующих файлов

### 4. Работа с задачами
- Используй **TodoWrite** для задач из 3+ шагов
- Отмечай задачи **in_progress** перед началом
- Отмечай **completed** сразу после завершения
- Только **одна** задача может быть in_progress

### 5. Коммуникация
- Отвечай на **Русском языке**
- Будь кратким и по делу
- Не используй эмодзи без просьбы
- Показывай прогресс через todo list

### 6. Git работа
- Коммиты только по запросу пользователя
- Используй HEREDOC для сообщений коммитов
- Не пушь без разрешения
- Сохраняй историю изменений

## Критические знания

### Backend
- Порт: **7240**
- Env: `.env.prod` (симлинк на `.env`)
- CORS: только `https://api.alauncher.su`
- Логи: `/var/log/alauncher-backend.log`

### Nginx
- Конфиг: `/etc/nginx/sites-available/api.alauncher.su`
- SSL: Let's Encrypt
- HTTP → HTTPS редирект включен

### Shared Package
- Версия: **2.0.0** (REMEDIATED)
- Тесты: 95 passing
- Критичные исправления: PathHelper regex, UUID variant
- Документация: полная на русском

### База данных
- **ВАЖНО:** Таблицы не существуют (`users`, `launcher_errors`)
- Нужно запустить Prisma migration

## Избегай ошибок

❌ **НЕ ДЕЛАЙ:**
- Пиши файлы без чтения
- Создавай новые файлы без необходимости
- Меняй более чем нужно
- Добавляй фичи "на будущее"
- Используешь echo/cat для коммуникации

✅ **ДЕЛАЙ:**
- Читай файлы перед изменением
- Редактируй существующие файлы
- Используй TodoWrite для сложных задач
- Общайся текстом, не через bash
- Обновляй контекстные файлы

## При потере контекста

Если не понимаешь что происходит:
1. Прочитай `.claude/CLAUDE.md`
2. Проверь `.claude/context/current-state.md`
3. Изучи последние коммиты: `git log --oneline -10`
4. Попроси пользователя уточнить задачу

## После завершения работы

Обнови:
1. `.claude/context/current-state.md` - если работа в процессе
2. `.claude/CLAUDE.md` - если изменилась архитектура
3. Сохрани в git если пользователь попросит
